<!DOCTYPE html>
<html lang="ja">

<head>
    <title>Simple ToDo</title>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width" />
    <script type="module" src="/ch15.04-10/ex01/index.js"></script>
</head>

<body>
    <p>
        The document has one marble: <inline-circle></inline-circle>.
        <br>
        The HTML parser instantiates two more marbles:
        <inline-circle diameter="2em" color="blue"></inline-circle>
        <inline-circle diameter=".6em" color="gold"></inline-circle>.
        <br>
        How many marbles does the document contain now?
    </p>

    <script>
        customElements.define("inline-circle", class InlineCircle extends HTMLElement {
            // <inline-circle>要素がドキュメントに挿入されるときに、ブラウザが
            // このメソッドを呼び出す。disconnectedCallback() メソッドもあるが、
            // この例では必要ない。
            connectedCallback() {
                // 円の作成に必要なスタイルを設定する。
                this.style.display = "inline-block";
                this.style.borderColor = "#008b8b";

                // ------------- 変更部分 -------------
                // ---------- ネオンver ----------
                // this.style.border = "none";
                // this.style.background = "#111";
                // this.style.boxShadow = "0 0 0 6px rgba(0,139,139,0.4), 0 0 30px #00ffff, inset 0 0 20px #00c5c5";
                // this.style.borderRadius = "50%";
                // --------------------------------

                // ---------- うねうねオレンジver ----------
                this.style.borderRadius = "48% 52% 45% 55% / 55% 45% 52% 48%";
                this.style.transform = "rotate(-8deg) translateY(6%)";
                this.style.background = "radial-gradient(circle at 40% 60%, #ff9a9e, #fad0c4)";
                this.style.border = "none";
                // ------------------------------------

                // 大きさがまだ設定されていない場合、現在のフォントサイズを基に
                // デフォルトの大きさを設定する。
                if (!this.style.width) {
                    this.style.width = "0.9em";
                    this.style.height = "0.9em";
                }
            }
            // 静的なobservedAttributes プロパティで、値が変化したときに
            // 通知してほしい属性を指定する（ここではゲッターを使っている。
            // 「static」はメソッドにしか使えないため）。
            static get observedAttributes() { return ["diameter", "color"]; }
            // カスタム要素が初めて解釈されるときや、その後解釈されたときに、
            // 前記した属性のいずれかが変化すると、このコールバックが呼び出される。
            attributeChangedCallback(name, oldValue, newValue) {
                switch (name) {
                    case "diameter":
                        // diameter 属性が変更された場合、大きさを更新する。
                        this.style.width = newValue;
                        this.style.height = newValue;
                        break;
                    case "color":
                        // color 属性が変更された場合、色を変更する。
                        this.style.backgroundColor = newValue;
                        break;
                }
            }
            // 要素の属性に対応するJavaScript プロパティを定義する。ここで
            // 定義したゲッターとセッターは、属性を読み出したり設定したり
            // するだけ。JavaScript のプロパティが設定されると、属性が設定
            // される。そして、attributeChangedCallback() が呼び出され、
            // 要素のスタイルが更新される。
            get diameter() { return this.getAttribute("diameter"); }
            set diameter(diameter) { this.setAttribute("diameter", diameter); }
            get color() { return this.getAttribute("color"); }
            set color(color) { this.setAttribute("color", color); }
        });
    </script>
</body>

</html>